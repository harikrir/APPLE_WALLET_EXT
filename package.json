




{
  "name": "com.aub.mobilebanking.wallet",
  "version": "1.0.0",
  "description": "AUB Apple Wallet Issuer Extension and In-App Provisioning Plugin",
  "cordova": {
    "id": "com.aub.mobilebanking.wallet",
    "platforms": [
      "ios"
    ]
  },
  "engines": {
    "cordovaDependencies": {
      "1.0.0": {
        "cordova": ">=10.0.0",
        "cordova-ios": ">=6.0.0"
      }
    }
  },
  "dependencies": {
    "xcode": "^3.0.1",
    "fs-extra": "^10.0.0"
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/aub-mobile/cordova-plugin-aub-wallet.git"
  },
  "keywords": [
    "ecosystem:cordova",
    "cordova-ios",
    "apple-wallet",
    "provisioning",
    "issuer-extension"
  ],
  "author": "AUB Mobile Team",
  "license": "MIT"
}





{
    "plugin": {
        "resource": "AUBWalletPlugin.zip"
    },
    "preferences": {
        "ios": [
            {
                "name": "deployment-target",
                "value": "14.0"
            },
            {
                "name": "SwiftVersion",
                "value": "5.0"
            }
        ]
    },
    "ios": {
        "provisioningProfiles": {
            "com.aub.mobilebanking.uat.bh.WNonUI": "com.aub.mobilebanking.uat.bh.WNonUI.mobileprovision",
            "com.aub.mobilebanking.uat.bh.WUI": "com.aub.mobilebanking.uat.bh.WUI.mobileprovision"
        }
    }
}


if (typeof AUBWallet !== 'undefined') {
    AUBWallet.setAuthToken($parameters.Token, function() {
        console.log("Auth Token set successfully");
    }, function(err) {
        console.error("Error setting token: " + err);
    });
}

if (typeof AUBWallet !== 'undefined') {
    AUBWallet.startProvisioning($parameters.CardId, $parameters.CardName, 
    function() {
        $actions.Resolve(true, ""); // Return success to OutSystems
    }, 
    function(err) {
        $actions.Resolve(false, err); // Return error message
    });
} else {
    $actions.Resolve(false, "Plugin not available");
}
